#!/bin/bash

# Script: kubctl-0x01
# Description: Scale Django deployment, verify pods, run load test, monitor usage

echo "ğŸ” Scaling Django app deployment to 3 replicas..."
kubectl scale deployment django-app --replicas=3

echo "â³ Waiting for pods to stabilize..."
sleep 10

echo "ğŸ“¦ Current running pods:"
kubectl get pods

echo "ğŸ“Š Resource usage per pod:"
kubectl top pods

echo "âš¡ Performing load test using wrk (ensure wrk is installed)..."
echo "Example test: 10 seconds, 10 threads, 100 connections"
wrk -t10 -c100 -d10s http://<YOUR-APP-CLUSTER-IP>:8000/

echo "âœ… Done."
